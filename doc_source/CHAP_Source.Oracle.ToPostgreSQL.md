# Converting Oracle to Amazon RDS for PostgreSQL or Amazon Aurora \(PostgreSQL\)<a name="CHAP_Source.Oracle.ToPostgreSQL"></a>

AWS SCT can convert SQL\*Plus files into PSQL\. The assessment report shows how AWS SCT converted the SQL\*Plus files into PSQL\. To convert SQL\*Plus files to PSQL, see [Converting Application SQL Using the AWS Schema Conversion Tool](CHAP_Converting.App.md)\.

This section covers the following topics:

**Topics**
+ [Converting Oracle ROWID to PostgreSQL](#CHAP_Source.Oracle.ToPostgreSQL.ConvertRowID)
+ [Converting Dynamic SQL for Oracle to PostgreSQL Migrations](#CHAP_Source.Oracle.ToPostgreSQL.DynamicSQL)
+ [Converting Oracle Partitions to PostgreSQL Version 10 Partitions](#CHAP_Source.Oracle.ToPostgreSQL.PG10Partitioning)

When converting Oracle system objects to PostgreSQL, AWS SCT converts the following:


| Oracle system object | Description | Converted PostgreSQL object | 
| --- | --- | --- | 
| V$VERSION  | Displays version numbers of core library components in the Oracle Database | aws\_oracle\_ext\.v$version | 
| V$INSTANCE | A view that shows the state of the current instance\. | aws\_oracle\_ext\.v$instance | 

After AWS SCT migrates schema objects and stored data, you can redirect your workflow from the source database to the target\. In most cases, work flows use unique numbers generated by database sequences to maintain integrity constraints such as primary keys and unique keys for data written to the target database\. This means that new values of a migrated sequence and the values generated before the migration must not overlap\. 

For Oracle to PostgreSQL migration projects, you can make sure that there is no overlap\. To do so, choose the option **Populate converted sequences with the last values generated on the source side** in **the Conversion settings** tab of **Project Settings**\.

## Converting Oracle ROWID to PostgreSQL<a name="CHAP_Source.Oracle.ToPostgreSQL.ConvertRowID"></a>

 In an Oracle database, the ROWID pseudocolumn contains the address of the table row\. The ROWID pseudocolumn is unique to Oracle, so AWS SCT can convert the ROWID pseudocolumn to a data column when you convert to PostgreSQL\. This conversion lets you retain the ROWID information\. 

When AWS SCT converts the ROWID pseudocolumn, it creates a data column with the data type BIGINT\. If no primary key exists, AWS SCT sets the ROWID column as the primary key\. If a primary key exists, AWS SCT sets the ROWID column with a unique constraint\.

**To create a data column for Oracle ROWID for a project**

1. Start AWS SCT\. Choose a project with Oracle as the source\.

1. Choose **Settings**, and then choose **Project settings**\. The **Current project settings** dialog box appears\. 

1. Choose **true** for **Generate row ID**\. 

1. Choose **OK** to save the settings and close the **Current project settings** dialog box\. 

## Converting Dynamic SQL for Oracle to PostgreSQL Migrations<a name="CHAP_Source.Oracle.ToPostgreSQL.DynamicSQL"></a>

Dynamic SQL is a programming technique that you can use to run data definition language \(DDL\) statements inside PL/SQL code\. You can also use dynamic SQL to generate and run SQL statements at run time when you don't know the exact text or object identifiers during development\. AWS SCT can convert dynamic SQL statements used with Oracle databases to their analog statements in PostgreSQL\.

**To convert Oracle dynamic SQL to PostgreSQL SQL**

1. Create an Oracle\-to\-PostgreSQL migration project\.

1. Connect to the source and target databases\.

1. Choose a stored procedure in the Oracle source tree view\. The procedure should contain references to the DBMS\_SQL Oracle package or have an EXECUTE IMMEDIATE statement\.

1. For **Actions**, choose **Convert Schema**, and agree to replace the objects if they exist\. The following screenshot shows the converted procedure below the Oracle procedure\.  
![\[Dynamic SQL conversion\]](http://docs.aws.amazon.com/SchemaConversionTool/latest/userguide/images/dynamicsql1.png)

## Converting Oracle Partitions to PostgreSQL Version 10 Partitions<a name="CHAP_Source.Oracle.ToPostgreSQL.PG10Partitioning"></a>

In PostgreSQL version 10 and later, you can specify how to divide a table into parts called *partitions*\. The table that is divided is called a *partitioned table*\. The table’s specification includes the partitioning method and a list of columns or expressions used as the partition key\.

All rows inserted into a partitioned table are routed to one of the partitions based on the value of the partition key\. Each partition has a subset of the data defined by its partition bounds\. Currently supported partitioning methods include range and list\. In range partitioning, each partition is assigned a range of keys\. In list partitioning, each partition is assigned a list of keys\.

AWS SCT can emulate partitions and subpartitions when converting a schema from an Oracle database to a PostgreSQL database\. An Oracle subpartition is converted to a PostgreSQL partition that has a table as its parent range expression\. The table is partitioned by range expression from the original Oracle subpartition\.

AWS SCT currently supports the following partitioning scenarios: 
+ Range
+ List
+ Range\-Range
+ List\-List
+ Range\-List
+ List\-Range
+ Timestamp without time zone

The following scenarios are not currently supported:
+ Hash
+ Range\-Hash
+ List\-Hash
+ Interval
+ Reference
+ System

Some known issues with partition conversion to PostgreSQL version 10 include the following:
+ Only not\-null columns can be partitioned by columns\.
+ DEFAULT is not a possible value for a partition value\.
+  Partitions based on Timestamp with Timezone are not supported\.
+  Partitions based on a hash function are not supported\.
+ You can’t update columns in partitioned tables because updating a value might cause the value to go to a different partition\. AWS SCT only supports deleting and inserting columns in partitioned tables\.
+  Foreign keys are not supported going from and to partitioned tables\.